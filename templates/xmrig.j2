{{ '// ' + 'xmrig.conf' }}
{{ '// ' + ansible_managed }}
{{ '// ' + 'Do not edit manually' }}

{{ '{' }}
{% include 'xmrig_main.j2' %}
{% if item.type == 'cpu' %}
{% include 'xmrig_cpu.j2' %}
{% elif item.type == 'amd' %}
{% include 'xmrig_amd.j2' %}
{% endif %}
{% if item.api is defined and item.api != '' %}
{% for xa in item.api %}
{% if loop.first %}
{{ '  ' ~ '\"api\"' ~ ': {' }}
{% endif %}
{% include 'xmrig_api.j2' %}
{% if loop.last %}
{{ '  ' + '},' }}
{% endif %}
{% endfor %}
{% endif %}
{% if item.pools is defined and item.pools != '' %}
{% for xp in item.pools %}
{% if loop.first %}
{{ '  ' + '\"pools\"' + ': [' }}
{{ '    ' + '{' }}
{% endif %}
{% include 'xmrig_pool.j2' %}
{% if loop.last %}
{{ '    ' + '}' }}
{{ '  ' + ']' }}
{% else %}
{{ '    ' + '},' }}
{% endif %}
{% endfor %}
{% endif %}
{{ '}' }}
